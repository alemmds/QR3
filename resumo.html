<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#000000"/>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <title>Resumo da Mesa</title>
</head>
<body>
    <header>
        <h1>Resumo da Mesa</h1>
    </header>

    <div class="container">
        <div id="mesa-resumo">
            <h2>Mesa <span id="mesa-numero"></span></h2>
            <div id="pedido-lista"></div>
            <div id="total-geral"></div>
        </div>
    </div>

    <script>
        // Função para carregar os pedidos da mesa específica com base no QR code
        function carregarResumoMesa() {
            const urlParams = new URLSearchParams(window.location.search);
            const mesa = urlParams.get('mesa');

            if (mesa) {
                document.getElementById("mesa-numero").textContent = mesa;
                const pedidos = JSON.parse(localStorage.getItem(`mesa${mesa}`)) || [];

                if (pedidos.length > 0) {
                    let totalGeral = 0;
                    let pedidoLista = document.getElementById("pedido-lista");
                    pedidoLista.innerHTML = '';

                    pedidos.forEach(pedido => {
                        let itemTotal = pedido.valor * pedido.quantidade;
                        totalGeral += itemTotal;
                        pedidoLista.innerHTML += `<p>${pedido.item}: R$${pedido.valor.toFixed(2)} x ${pedido.quantidade} = R$${itemTotal.toFixed(2)}</p>`;
                    });

                    document.getElementById("total-geral").innerHTML = `<strong>Total Geral: R$${totalGeral.toFixed(2)}</strong>`;
                } else {
                    document.getElementById("pedido-lista").innerHTML = '<p>Nenhum produto cadastrado.</p>';
                }
            } else {
                document.getElementById("pedido-lista").innerHTML = '<p>Mesa não encontrada.</p>';
            }
        }

        window.onload = carregarResumoMesa;
    </script>
</body>
</html>
